<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="initShader.js"></script>
</head>

<body>
    <canvas id="cvs">不支持canvas</canvas>
</body>

<script>
    const ctx = document.getElementById('cvs')
    const gl = ctx.getContext('webgl')

    const VERTEX_SHADER_SOURCE = `
    attribute vec4 a_Position;
    void main() {
        gl_Position = a_Position;
    }`

    const FRAGMENT_SHADER_SOURCE = `
    void main() {
        gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
    }`

    const vertexShader = gl.createShader(gl.VERTEX_SHADER)
    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER)

    gl.shaderSource(vertexShader, VERTEX_SHADER_SOURCE)
    gl.shaderSource(fragmentShader, FRAGMENT_SHADER_SOURCE)

    gl.compileShader(vertexShader)
    gl.compileShader(fragmentShader)

    const program = gl.createProgram()

    gl.attachShader(program, vertexShader)
    gl.attachShader(program, fragmentShader)

    gl.linkProgram(program)
    gl.useProgram(program)

    //定义一个类型数组保存顶点坐标值
    var vertices = new Float32Array([0.0, 0.5, -0.5, -0.5, 0.5, -0.5])
    //先创建一个缓存对象
    var vertexBuffer = gl.createBuffer()
    //说明缓存对象保存的类型
    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer)
    //写入坐标数据
    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW)
    //获取到顶点着色器中变量
    var a_Position = gl.getAttribLocation(shaderProgram, 'a_Position')
    //将坐标值赋值给变量
    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0)
    //开启变量值的使用
    gl.enableVertexAttribArray(a_Position)

    //绘制指定位置的图形
    gl.drawArrays(gl.TRIANGLES, 0, 3)
</script>

</html>